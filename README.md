# ì‹œíë¦¿ ë©”ì‹ ì € - Secret QR Chat

QR ì½”ë“œ ê¸°ë°˜ ë³´ì•ˆ ì¤‘ì‹¬ í•˜ì´ë¸Œë¦¬ë“œ ë©”ì‹ ì €

## ğŸ” í•µì‹¬ ê°œë…

### ê°€ì… ë°©ì‹
- **ì´ë©”ì¼**: ë¡œê·¸ì¸ ë° ê·¸ë£¹ ì±„íŒ… ì´ˆëŒ€ìš©
- **ì‹œíë¦¿ QR ì£¼ì†Œ**: ìë™ ìƒì„±ë˜ëŠ” ê³ ìœ  ID (ì˜ˆ: SQR-A1B2C3D4)
- **ë‹‰ë„¤ì„**: ì‚¬ìš©ì í‘œì‹œëª…

### ì±„íŒ… ë°©ì‹
1. **1:1 ì±„íŒ…** (ì‹œíë¦¿ QR ê¸°ë°˜)
   - QR ì½”ë“œ ìŠ¤ìº”ìœ¼ë¡œë§Œ ì¹œêµ¬ ì¶”ê°€ ê°€ëŠ¥
   - QR ì—†ì´ëŠ” ì—°ë½ ë¶ˆê°€ëŠ¥ (í”„ë¼ì´ë²„ì‹œ ë³´í˜¸)
   - ìª½ì§€, íŒŒì¼ ê³µìœ , ìŒì„±/ì˜ìƒ í†µí™”

2. **ê·¸ë£¹ ì±„íŒ…** (ì´ë©”ì¼ ê¸°ë°˜)
   - ì´ë©”ì¼ë¡œ ë©¤ë²„ ì´ˆëŒ€
   - ë‹¤ì¤‘ ì‚¬ìš©ì ì±„íŒ…ë°©
   - íŒŒì¼ ê³µìœ  ì§€ì›

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ë³´ì•ˆ ê¸°ëŠ¥
- âœ… ì‹œíë¦¿ QR ì£¼ì†Œ ìë™ ìƒì„±
- âœ… QR ì½”ë“œ ê¸°ë°˜ ì¹œêµ¬ ì¶”ê°€ (QR ì—†ì´ëŠ” ì—°ë½ ë¶ˆê°€)
- âœ… JWT ê¸°ë°˜ ì¸ì¦
- âœ… ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” (bcrypt)

### ì±„íŒ… ê¸°ëŠ¥
- âœ… ì‹¤ì‹œê°„ 1:1 ì±„íŒ… (WebSocket)
- âœ… ì´ë©”ì¼ ê¸°ë°˜ ê·¸ë£¹ ì±„íŒ…
- âœ… íŒŒì¼ ê³µìœ  (ìµœëŒ€ 10MB)
- âœ… ì½ìŒ í‘œì‹œ
- âœ… ì˜¨ë¼ì¸ ìƒíƒœ í‘œì‹œ
- ğŸ”„ ìŒì„±/ì˜ìƒ í†µí™” (WebRTC) - êµ¬í˜„ ì¤‘

### UI/UX
- âœ… ëª¨ë˜í•œ ê·¸ë¼ë°ì´ì…˜ ë””ìì¸
- âœ… ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
- âœ… ì§ê´€ì ì¸ íƒ­ ë„¤ë¹„ê²Œì´ì…˜
- âœ… QR ì½”ë“œ ìŠ¤ìº” ê¸°ëŠ¥

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Node.js + Express**: REST API ì„œë²„
- **Socket.io**: ì‹¤ì‹œê°„ í†µì‹ 
- **SQLite**: ë°ì´í„°ë² ì´ìŠ¤
- **Multer**: íŒŒì¼ ì—…ë¡œë“œ
- **bcryptjs**: ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- **jsonwebtoken**: JWT ì¸ì¦

### Frontend
- **React 18 + TypeScript**: UI í”„ë ˆì„ì›Œí¬
- **Vite**: ë¹Œë“œ ë„êµ¬
- **Tailwind CSS**: ìŠ¤íƒ€ì¼ë§
- **Zustand**: ìƒíƒœ ê´€ë¦¬
- **Socket.io Client**: ì‹¤ì‹œê°„ í†µì‹ 
- **html5-qrcode**: QR ì½”ë“œ ìŠ¤ìº”
- **qrcode**: QR ì½”ë“œ ìƒì„±
- **date-fns**: ë‚ ì§œ í¬ë§·íŒ…
- **React Router**: ë¼ìš°íŒ…

## ğŸ“¦ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì˜ì¡´ì„± ì„¤ì¹˜
```bash
npm install
```

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
npm run dev
```

ë˜ëŠ” ê°œë³„ ì‹¤í–‰:
```bash
# ë°±ì—”ë“œë§Œ
npm run dev:server

# í”„ë¡ íŠ¸ì—”ë“œë§Œ
npm run dev:client
```

### 3. ì ‘ì†
- Frontend: http://localhost:5173
- Backend: http://localhost:3001

## ğŸ“± ì‚¬ìš© ë°©ë²•

### 1. íšŒì›ê°€ì…
1. ì´ë©”ì¼, ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
2. ì‹œíë¦¿ QR ì£¼ì†Œ ìë™ ìƒì„±
3. ê°œì¸ QR ì½”ë“œ ë°œê¸‰

### 2. ì¹œêµ¬ ì¶”ê°€ (1:1 ì±„íŒ…ìš©)
1. "ë‚´ QR" íƒ­ì—ì„œ ìì‹ ì˜ QR ì½”ë“œ í™•ì¸
2. QR ì½”ë“œ ê³µìœ  (ì €ì¥ ë˜ëŠ” í™”ë©´ ê³µìœ )
3. ìƒëŒ€ë°©ì´ "QR ìŠ¤ìº”" íƒ­ì—ì„œ ìŠ¤ìº”
4. ì–‘ë°©í–¥ ì¹œêµ¬ ì¶”ê°€ ì™„ë£Œ

### 3. 1:1 ì±„íŒ…
1. "ì¹œêµ¬" íƒ­ì—ì„œ ì¹œêµ¬ ì„ íƒ
2. ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡
3. íŒŒì¼ ì²¨ë¶€ ê°€ëŠ¥
4. ìŒì„±/ì˜ìƒ í†µí™” ë²„íŠ¼ (ê°œë°œ ì¤‘)

### 4. ê·¸ë£¹ ì±„íŒ…
1. "ê·¸ë£¹" íƒ­ì—ì„œ "ê·¸ë£¹ ë§Œë“¤ê¸°" í´ë¦­
2. ê·¸ë£¹ëª… ì…ë ¥
3. ë©¤ë²„ ì´ë©”ì¼ ì…ë ¥ (ì‰¼í‘œë¡œ êµ¬ë¶„)
4. ìƒì„± í›„ ì‹¤ì‹œê°„ ì±„íŒ…

## ğŸ—‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
secret-qr-chat/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â””â”€â”€ database.js         # DB ì´ˆê¸°í™” ë° ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.js             # ì¸ì¦ API
â”‚   â”‚   â”œâ”€â”€ friends.js          # ì¹œêµ¬ ê´€ë¦¬ API
â”‚   â”‚   â””â”€â”€ groups.js           # ê·¸ë£¹ ê´€ë¦¬ API
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.js             # JWT ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â””â”€â”€ index.js                # ë©”ì¸ ì„œë²„ + Socket.io
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ MyQRCode.tsx        # ë‚´ QR ì½”ë“œ
â”‚   â”‚   â”œâ”€â”€ QRScanner.tsx       # QR ìŠ¤ìº”
â”‚   â”‚   â”œâ”€â”€ FriendsList.tsx     # ì¹œêµ¬ ëª©ë¡
â”‚   â”‚   â”œâ”€â”€ DirectChat.tsx      # 1:1 ì±„íŒ…
â”‚   â”‚   â””â”€â”€ GroupsList.tsx      # ê·¸ë£¹ ëª©ë¡
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Login.tsx           # ë¡œê·¸ì¸
â”‚   â”‚   â”œâ”€â”€ Register.tsx        # íšŒì›ê°€ì…
â”‚   â”‚   â”œâ”€â”€ AddFriend.tsx       # ì¹œêµ¬ ì¶”ê°€ (QR ì²˜ë¦¬)
â”‚   â”‚   â””â”€â”€ Dashboard.tsx       # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ authStore.ts        # ì¸ì¦ ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ api.ts              # Axios ì¸ìŠ¤í„´ìŠ¤
â”‚   â”‚   â””â”€â”€ socket.ts           # Socket.io ì—°ê²°
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts            # TypeScript íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ App.tsx                 # ë¼ìš°í„° ì„¤ì •
â”‚   â”œâ”€â”€ main.tsx                # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â””â”€â”€ index.css               # ì „ì—­ ìŠ¤íƒ€ì¼
â”œâ”€â”€ public/
â”‚   â””â”€â”€ uploads/                # íŒŒì¼ ì—…ë¡œë“œ ì €ì¥ì†Œ
â”œâ”€â”€ data.db                     # SQLite ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ package.json
```

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### users
- `id`: ì‚¬ìš©ì ID (UUID)
- `email`: ì´ë©”ì¼ (unique)
- `password`: ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
- `nickname`: ë‹‰ë„¤ì„
- `secret_qr_address`: ì‹œíë¦¿ QR ì£¼ì†Œ (unique)
- `qr_code`: QR ì½”ë“œ ì´ë¯¸ì§€ (base64)

### friends
- `id`: ê´€ê³„ ID
- `user_id`: ì‚¬ìš©ì ID
- `friend_id`: ì¹œêµ¬ ID
- `friend_nickname`: ì¹œêµ¬ ë‹‰ë„¤ì„
- ì–‘ë°©í–¥ ê´€ê³„ (A-B, B-A ëª¨ë‘ ì €ì¥)

### direct_messages
- `id`: ë©”ì‹œì§€ ID
- `sender_id`: ë°œì‹ ì ID
- `receiver_id`: ìˆ˜ì‹ ì ID
- `message`: ë©”ì‹œì§€ ë‚´ìš©
- `file_url`, `file_name`, `file_type`: íŒŒì¼ ì •ë³´
- `is_read`: ì½ìŒ ì—¬ë¶€

### group_rooms
- `id`: ê·¸ë£¹ ID
- `name`: ê·¸ë£¹ëª…
- `creator_id`: ìƒì„±ì ID

### group_members
- `id`: ë©¤ë²„ì‹­ ID
- `room_id`: ê·¸ë£¹ ID
- `user_id`: ì‚¬ìš©ì ID

### group_messages
- `id`: ë©”ì‹œì§€ ID
- `room_id`: ê·¸ë£¹ ID
- `sender_id`: ë°œì‹ ì ID
- `message`: ë©”ì‹œì§€ ë‚´ìš©
- `file_url`, `file_name`, `file_type`: íŒŒì¼ ì •ë³´

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦
- `POST /api/auth/register` - íšŒì›ê°€ì…
- `POST /api/auth/login` - ë¡œê·¸ì¸
- `GET /api/auth/me` - ë‚´ ì •ë³´ ì¡°íšŒ

### ì¹œêµ¬
- `GET /api/friends/by-sqr/:sqrAddress` - QR ì£¼ì†Œë¡œ ì‚¬ìš©ì ì¡°íšŒ
- `POST /api/friends/add-friend` - ì¹œêµ¬ ì¶”ê°€
- `GET /api/friends/friends` - ë‚´ ì¹œêµ¬ ëª©ë¡
- `DELETE /api/friends/friends/:friendId` - ì¹œêµ¬ ì‚­ì œ

### ê·¸ë£¹
- `POST /api/groups/create` - ê·¸ë£¹ ìƒì„±
- `GET /api/groups/my-rooms` - ë‚´ ê·¸ë£¹ ëª©ë¡
- `GET /api/groups/:roomId` - ê·¸ë£¹ ì •ë³´
- `GET /api/groups/:roomId/messages` - ê·¸ë£¹ ë©”ì‹œì§€
- `DELETE /api/groups/:roomId/leave` - ê·¸ë£¹ ë‚˜ê°€ê¸°

### íŒŒì¼
- `POST /api/upload` - íŒŒì¼ ì—…ë¡œë“œ

## ğŸ”„ Socket.io ì´ë²¤íŠ¸

### Client â†’ Server
- `join-direct-chat` - 1:1 ì±„íŒ…ë°© ì…ì¥
- `send-direct-message` - 1:1 ë©”ì‹œì§€ ì „ì†¡
- `join-group` - ê·¸ë£¹ ì±„íŒ…ë°© ì…ì¥
- `send-group-message` - ê·¸ë£¹ ë©”ì‹œì§€ ì „ì†¡
- `mark-as-read` - ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬
- `call-user`, `call-answer`, `ice-candidate`, `end-call` - WebRTC

### Server â†’ Client
- `direct-message` - 1:1 ë©”ì‹œì§€ ìˆ˜ì‹ 
- `group-message` - ê·¸ë£¹ ë©”ì‹œì§€ ìˆ˜ì‹ 
- `new-message-notification` - ìƒˆ ë©”ì‹œì§€ ì•Œë¦¼
- `user-online`, `user-offline` - ì˜¨ë¼ì¸ ìƒíƒœ
- `messages-read` - ë©”ì‹œì§€ ì½ìŒ í™•ì¸
- `incoming-call`, `call-answered`, `call-ended` - WebRTC

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### í˜„ì¬ êµ¬í˜„
- âœ… JWT í† í° ê¸°ë°˜ ì¸ì¦
- âœ… bcrypt ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
- âœ… CORS ì„¤ì •
- âœ… íŒŒì¼ í¬ê¸° ì œí•œ (10MB)
- âœ… ì¹œêµ¬ ê´€ê³„ ê²€ì¦

### í”„ë¡œë•ì…˜ ê¶Œì¥ì‚¬í•­
- ğŸ”„ HTTPS ì ìš©
- ğŸ”„ í™˜ê²½ ë³€ìˆ˜ë¡œ ë¯¼ê° ì •ë³´ ê´€ë¦¬
- ğŸ”„ Rate limiting
- ğŸ”„ Input validation ê°•í™”
- ğŸ”„ XSS/CSRF ë°©ì–´
- ğŸ”„ ë©”ì‹œì§€ End-to-End ì•”í˜¸í™”
- ğŸ”„ PostgreSQL/MongoDB ë“± production DB ì‚¬ìš©

## ğŸ“ TODO

- [ ] WebRTC ìŒì„±/ì˜ìƒ í†µí™” êµ¬í˜„
- [ ] ê·¸ë£¹ ì±„íŒ… UI ê°œì„ 
- [ ] ë©”ì‹œì§€ ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] í‘¸ì‹œ ì•Œë¦¼
- [ ] ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
- [ ] ì´ëª¨ì§€ ì§€ì›
- [ ] ë‹¤í¬ ëª¨ë“œ
- [ ] PWA ì§€ì›
- [ ] E2E ì•”í˜¸í™”

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT

## ğŸ‘¨â€ğŸ’» ê°œë°œì

ì‹œíë¦¿ ë©”ì‹ ì € ê°œë°œíŒ€

---

**ë³´ì•ˆ ë©”ì‹ ì €ì˜ ìƒˆë¡œìš´ íŒ¨ëŸ¬ë‹¤ì„**
QR ì½”ë“œë¡œ í”„ë¼ì´ë²„ì‹œë¥¼ ì§€í‚¤ì„¸ìš”!
